<center><font size = 10 face = '黑体'>《MySQL存储引擎定制开发》实验报告</font></center>



 

| 题目 | MySQL存储引擎定制开发 |
| :--: | --------------------- |

| 小组成员信息 |
| :----------: |

| 姓名   | 学号     | 班级     | 分工                                 |
| ------ | -------- | -------- | ------------------------------------ |
| 陈杰鹏 | 20337178 | 计科二班 | 数据查询、数据插入、表重命名、表删除 |
| 陈瀚翔 | 20337177 | 计科二班 | 数据更新、数据删除                   |

# 一．开发环境与开发工具：

**开发环境：**Vmware Ubuntu 20.04

**开发工具:** MySQL-5.7.39 ， Clion 2022.3

# 二. 存储引擎功能需求分析

​		MySQL 是支持动态可插拔的储存引擎体系架构，从而可以创建新的储存引擎并直接将其添加到正在运行的 MySQL 中，而无需重新编译 MySQL。这种架构使得为 MySQL 开发新的储存引擎和部署变得更加容易。  
​		MySQL存储引擎是保存数据的核心技术，也就是说，存储引擎是服务于存储服务的，通过存储引擎将数据保存，MySQL的insert、delete等SQL语句，都是由存储引擎来完成结果生成的。  
​		MySQL服务器以模块化方式构建：存储引擎管理的数据存储和索引管理 MySQL。MySQL 服务器与存储引擎通信 通过定义的 API。每个存储引擎都是一个类，其中包含该类的每个实例 通过特殊接口与MySQL服务器通信。handler处理程序基于每个线程的一个处理程序进行实例化 这需要使用特定的表。例如：如果三个 所有连接都开始使用同一个表，三个处理程序 需要创建实例。创建处理程序实例后，MySQL 服务器会发出 处理程序的命令以执行数据存储和检索打开表、操作行和管理等任务 指标。自定义存储引擎可以循序渐进的方式构建：开发人员可以从只读存储引擎开始，然后添加支持和操作，甚至以后添加支持索引、事务和其他高级操作。  
​		同时MySQL也是引擎开发友好的，他为开发者提供了一个example的存储引擎模块，开发者只需要在example模块中基于自己的功能需求来实现即可。  
​		为了更好的将MySQL理论知识与实验相结合，我们决定基于example模块开发支持数据查询、数据插入、数据删除、数据更新的自制引擎，同时还应有表的重命名与删除功能。具体的四个阶段为：

- 生成引擎的方法存根——整个过程的第一步是创建一个可以被插入服务器的基本的存储引擎。创建最基本的源代码文件，为存储引擎从handler基类派生出一个子类，把这个存储引擎本身插入到服务器的源代码里。
- 实现表(文件)操作——能够正确的完成各种必要的文件操作，如创建、打开文件等。
- 实现数据读/写操作——利用MySQL提供的api接口，实现创建、查询功能。
- 实现数据更新和删除操作——实现对存储引擎里的数据进行修改的方法。

​		基于此实验，我们的知识将不再停留在对MySQL的SQL语句接口调用，而是深入到MySQL环境开发与功能设计，加深对MySQL的概念理解。

# 三. 存储引擎模块设计

## a. 数据查询模块



## b. 数据插入模块



## c. 数据删除模块



## d. 数据更新模块



## e. 表重命名模块



## f. 表删除模块



# 四. 存储引擎功能测试

## 1. 存储引擎的加载



## 2. 表的创建



## 3. 数据插入



## 4. 数据更新



## 5. 数据删除



## 6. 表的重命名



## 7. 表的删除



# 五. 总结
